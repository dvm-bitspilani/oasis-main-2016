/*! POM-publicite v0.2.3 */
!function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[a]={exports:{}};e[a][0].call(f.exports,function(t){var n=e[a][1][t];return o(n?n:t)},f,f.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){!function(t,n){"undefined"!=typeof e?e.exports=n():"function"==typeof define&&"object"==typeof define.amd?define(n):this[t]=n()}("domready",function(t){function e(t){for(d=1;t=r.shift();)t()}var n,r=[],o=!1,i=document,a=i.documentElement,s=a.doScroll,u="DOMContentLoaded",c="addEventListener",f="onreadystatechange",l="readyState",p=s?/^loaded|^c/:/^loaded|c/,d=p.test(i[l]);return i[c]&&i[c](u,n=function(){i.removeEventListener(u,n,o),e()},o),s&&i.attachEvent(f,n=function(){/^c/.test(i[l])&&(i.detachEvent(f,n),e())}),t=s?function(e){self!=top?d?e():r.push(e):function(){try{a.doScroll("left")}catch(n){return setTimeout(function(){t(e)},50)}e()}()}:function(t){d?t():r.push(t)}})},{}],2:[function(t,e,n){function r(t,e){for(var n in e)t.setAttribute(n,e[n])}function o(t,e){t.onload=function(){this.onerror=this.onload=null,e(null,t)},t.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),t)}}function i(t,e){t.onreadystatechange=function(){("complete"==this.readyState||"loaded"==this.readyState)&&(this.onreadystatechange=null,e(null,t))}}e.exports=function(t,e,n){var a=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script");"function"==typeof e&&(n=e,e={}),e=e||{},n=n||function(){},s.type=e.type||"text/javascript",s.charset=e.charset||"utf8",s.async="async"in e?!!e.async:!0,s.src=t,e.attrs&&r(s,e.attrs),e.text&&(s.text=""+e.text);var u="onload"in s?o:i;u(s,n),s.onload||o(s,n),a.appendChild(s)}},{}],3:[function(t,e,n){(function(t){(function(t,e,n,r,o){!function(){function t(t,s){t=t||"",s=s||{};for(var u in e)e.hasOwnProperty(u)&&(s.autoFix&&(s["fix_"+u]=!0),s.fix=s.fix||s["fix_"+u]);var c=[],f=document.createElement("div"),l=function(t){return"string"==typeof t&&-1!==t.indexOf("&")?(f.innerHTML=t,f.textContent||f.innerText||t):t},p=function(e){t+=e},d=function(e){t=e+t},h={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},m={comment:function(){var e=t.indexOf("-->");return e>=0?{content:t.substr(4,e),length:e+3}:void 0},endTag:function(){var e=t.match(r);return e?{tagName:e[1],length:e[0].length}:void 0},atomicTag:function(){var e=m.startTag();if(e){var n=t.slice(e.length);if(n.match(new RegExp("</\\s*"+e.tagName+"\\s*>","i"))){var r=n.match(new RegExp("([\\s\\S]*?)</\\s*"+e.tagName+"\\s*>","i"));if(r)return{tagName:e.tagName,attrs:e.attrs,content:r[1],length:r[0].length+e.length}}}},startTag:function(){var e=t.indexOf(">");if(-1===e)return null;var r=t.match(n);if(r){var a={},s={},u=r[2];return r[2].replace(o,function(t,e){if(arguments[2]||arguments[3]||arguments[4]||arguments[5])if(arguments[5])a[arguments[5]]="",s[e]=!0;else{var n=arguments[2]||arguments[3]||arguments[4]||i.test(e)&&e||"";a[e]=l(n)}else a[e]=null;u=u.replace(t,"")}),{tagName:r[1],attrs:a,booleanAttrs:s,rest:u,unary:!!r[3],length:r[0].length}}},chars:function(){var e=t.indexOf("<");return{length:e>=0?e:t.length}}},g=function(){for(var e in h)if(h[e].test(t)){a&&console.log("suspected "+e);var n=m[e]();return n?(a&&console.log("parsed "+e,n),n.type=n.type||e,n.text=t.substr(0,n.length),t=t.slice(n.length),n):null}},y=function(t){for(var e;e=g();)if(t[e.type]&&t[e.type](e)===!1)return},v=function(){var e=t;return t="",e},w=function(){return t};return s.fix&&!function(){var e=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,n=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,r=[];r.last=function(){return this[this.length-1]},r.lastTagNameEq=function(t){var e=this.last();return e&&e.tagName&&e.tagName.toUpperCase()===t.toUpperCase()},r.containsTagName=function(t){for(var e,n=0;e=this[n];n++)if(e.tagName===t)return!0;return!1};var o=function(t){return t&&"startTag"===t.type&&(t.unary=e.test(t.tagName)||t.unary,t.html5Unary=!/\/>$/.test(t.text)),t},i=g,a=function(){var e=t,n=o(i());return t=e,n},u=function(){var t=r.pop();d("</"+t.tagName+">")},c={startTag:function(t){var e=t.tagName;"TR"===e.toUpperCase()&&r.lastTagNameEq("TABLE")?(d("<TBODY>"),l()):s.fix_selfClose&&n.test(e)&&r.containsTagName(e)?r.lastTagNameEq(e)?u():(d("</"+t.tagName+">"),l()):t.unary||r.push(t)},endTag:function(t){var e=r.last();e?s.fix_tagSoup&&!r.lastTagNameEq(t.tagName)?u():r.pop():s.fix_tagSoup&&f()}},f=function(){i(),l()},l=function(){var t=a();t&&c[t.type]&&c[t.type](t)};g=function(){return l(),o(i())}}(),{append:p,readToken:g,readTokens:y,clear:v,rest:w,stack:c}}var e=function(){var t,e={},n=this.document.createElement("div");return t="<P><I></P></I>",n.innerHTML=t,e.tagSoup=n.innerHTML!==t,n.innerHTML="<P><i><P></P></i></P>",e.selfClose=2===n.childNodes.length,e}(),n=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,r=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,o=/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,i=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i,a=!1;t.supports=e,t.tokenToString=function(t){var e={comment:function(t){return"<!--"+t.content},endTag:function(t){return"</"+t.tagName+">"},atomicTag:function(t){return a&&console.log(t),e.startTag(t)+t.content+e.endTag(t)},startTag:function(t){var e="<"+t.tagName;for(var n in t.attrs){e+=" "+n;var r=t.attrs[n];("undefined"==typeof t.booleanAttrs||"undefined"==typeof t.booleanAttrs[n])&&(e+='="'+(r?r.replace(/(^|[^\\])"/g,'$1\\"'):"")+'"')}return t.rest&&(e+=t.rest),e+(t.unary&&!t.html5Unary?"/>":">")},chars:function(t){return t.text}};return e[t.type](t)},t.escapeAttributes=function(t){var e={};for(var n in t){var r=t[n];e[n]=r&&r.replace(/(^|[^\\])"/g,'$1\\"')}return e};for(var s in e)t.browserHasFlaw=t.browserHasFlaw||!e[s]&&s;this.htmlParser=t}(),o("undefined"!=typeof htmlParser?htmlParser:window.htmlParser)}).call(t,void 0,void 0,void 0,void 0,function(t){e.exports=t})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,e,n){(function(n){htmlParser=n.htmlParser=t("/home/jacques/Workspace/publicite/node_modules/postscribe/htmlParser/htmlParser.js");(function(t,e,n,r,o){!function(){function t(){}function e(t){return t!==p&&null!==t}function n(t){return"function"==typeof t}function r(t,e,n){var r,o=t&&t.length||0;for(r=0;o>r;r++)e.call(n,t[r],r)}function o(t,e,n){var r;for(r in t)t.hasOwnProperty(r)&&e.call(n,r,t[r])}function i(t,e){return o(e,function(e,n){t[e]=n}),t}function a(t,n){return t=t||{},o(n,function(n,r){e(t[n])||(t[n]=r)}),t}function s(t){try{return h.call(t)}catch(e){var n=[];return r(t,function(t){n.push(t)}),n}}function u(t){return t&&"tagName"in t?!!~t.tagName.toLowerCase().indexOf("script"):!1}function c(t){return t&&"tagName"in t?!!~t.tagName.toLowerCase().indexOf("style"):!1}var f={afterAsync:t,afterDequeue:t,afterStreamStart:t,afterWrite:t,autoFix:!0,beforeEnqueue:t,beforeWriteToken:function(t){return t},beforeWrite:function(t){return t},done:t,error:function(t){throw t},releaseAsync:!1},l=this,p=void 0;if(!l.postscribe){var d=!1,h=Array.prototype.slice,m=function(t){return t[t.length-1]},g=function(){function t(t,n,r){var o=f+n;if(2===arguments.length){var i=t.getAttribute(o);return e(i)?String(i):i}e(r)&&""!==r?t.setAttribute(o,r):t.removeAttribute(o)}function a(e,n){var r=e.ownerDocument;i(this,{root:e,options:n,win:r.defaultView||r.parentWindow,doc:r,parser:htmlParser("",{autoFix:n.autoFix}),actuals:[e],proxyHistory:"",proxyRoot:r.createElement(e.nodeName),scriptStack:[],writeQueue:[]}),t(this.proxyRoot,"proxyof",0)}var f="data-ps-";return a.prototype.write=function(){[].push.apply(this.writeQueue,arguments);for(var t;!this.deferredRemote&&this.writeQueue.length;)t=this.writeQueue.shift(),n(t)?this.callFunction(t):this.writeImpl(t)},a.prototype.callFunction=function(t){var e={type:"function",value:t.name||t.toString()};this.onScriptStart(e),t.call(this.win,this.doc),this.onScriptDone(e)},a.prototype.writeImpl=function(t){this.parser.append(t);for(var e,n,r,o=[];(e=this.parser.readToken())&&!(n=u(e))&&!(r=c(e));)e=this.options.beforeWriteToken(e),e&&o.push(e);this.writeStaticTokens(o),n&&this.handleScriptToken(e),r&&this.handleStyleToken(e)},a.prototype.writeStaticTokens=function(t){var e=this.buildChunk(t);if(e.actual)return e.html=this.proxyHistory+e.actual,this.proxyHistory+=e.proxy,this.proxyRoot.innerHTML=e.html,d&&(e.proxyInnerHTML=this.proxyRoot.innerHTML),this.walkChunk(),d&&(e.actualInnerHTML=this.root.innerHTML),e},a.prototype.buildChunk=function(t){var e=this.actuals.length,n=[],o=[],i=[];return r(t,function(t){var r=htmlParser.tokenToString(t);if(n.push(r),t.attrs){if(!/^noscript$/i.test(t.tagName)){var a=e++;o.push(r.replace(/(\/?>)/," "+f+"id="+a+" $1")),"ps-script"!==t.attrs.id&&"ps-style"!==t.attrs.id&&i.push("atomicTag"===t.type?"":"<"+t.tagName+" "+f+"proxyof="+a+(t.unary?" />":">"))}}else o.push(r),i.push("endTag"===t.type?r:"")}),{tokens:t,raw:n.join(""),actual:o.join(""),proxy:i.join("")}},a.prototype.walkChunk=function(){for(var n,r=[this.proxyRoot];e(n=r.shift());){var o=1===n.nodeType,i=o&&t(n,"proxyof");if(!i){o&&(this.actuals[t(n,"id")]=n,t(n,"id",null));var a=n.parentNode&&t(n.parentNode,"proxyof");a&&this.actuals[a].appendChild(n)}r.unshift.apply(r,s(n.childNodes))}},a.prototype.handleScriptToken=function(t){var e=this.parser.clear();if(e&&this.writeQueue.unshift(e),t.src=t.attrs.src||t.attrs.SRC,t=this.options.beforeWriteToken(t)){t.src&&this.scriptStack.length?this.deferredRemote=t:this.onScriptStart(t);var n=this;this.writeScriptToken(t,function(){n.onScriptDone(t)})}},a.prototype.handleStyleToken=function(t){var e=this.parser.clear();e&&this.writeQueue.unshift(e),t.type=t.attrs.type||t.attrs.TYPE||"text/css",t=this.options.beforeWriteToken(t),t&&this.writeStyleToken(t),e&&this.write()},a.prototype.writeStyleToken=function(t){var e=this.buildStyle(t);this.insertStyle(e),t.content&&(e.styleSheet&&!e.sheet?e.styleSheet.cssText=t.content:e.appendChild(this.doc.createTextNode(t.content)))},a.prototype.buildStyle=function(t){var e=this.doc.createElement(t.tagName);return e.setAttribute("type",t.type),o(t.attrs,function(t,n){e.setAttribute(t,n)}),e},a.prototype.insertStyle=function(t){this.writeImpl('<span id="ps-style"/>');var e=this.doc.getElementById("ps-style");e.parentNode.replaceChild(t,e)},a.prototype.onScriptStart=function(t){t.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(t)},a.prototype.onScriptDone=function(t){return t!==this.scriptStack[0]?void this.options.error({message:"Bad script nesting or script finished twice"}):(this.scriptStack.shift(),this.write.apply(this,t.outerWrites),void(!this.scriptStack.length&&this.deferredRemote&&(this.onScriptStart(this.deferredRemote),this.deferredRemote=null)))},a.prototype.writeScriptToken=function(t,e){var n=this.buildScript(t),r=this.shouldRelease(n),o=this.options.afterAsync;t.src&&(n.src=t.src,this.scriptLoadHandler(n,r?o:function(){e(),o()}));try{this.insertScript(n),(!t.src||r)&&e()}catch(i){this.options.error(i),e()}},a.prototype.buildScript=function(t){var e=this.doc.createElement(t.tagName);return o(t.attrs,function(t,n){e.setAttribute(t,n)}),t.content&&(e.text=t.content),e},a.prototype.insertScript=function(t){this.writeImpl('<span id="ps-script"/>');var e=this.doc.getElementById("ps-script");e.parentNode.replaceChild(t,e)},a.prototype.scriptLoadHandler=function(t,e){function n(){t=t.onload=t.onreadystatechange=t.onerror=null}function r(){n(),e()}function o(t){n(),a(t),e()}var a=this.options.error;i(t,{onload:function(){r()},onreadystatechange:function(){/^(loaded|complete)$/.test(t.readyState)&&r()},onerror:function(){o({message:"remote script failed "+t.src})}})},a.prototype.shouldRelease=function(t){var e=/^script$/i.test(t.nodeName);return!e||!!(this.options.releaseAsync&&t.src&&t.hasAttribute("async"))},a}();l.postscribe=function(){function e(){var t,e=c.shift();e&&(t=m(e),t.afterDequeue(),e.stream=r.apply(null,e),t.afterStreamStart())}function r(n,r,a){function c(t){t=a.beforeWrite(t),p.write(t),a.afterWrite(t)}p=new g(n,a),p.id=u++,p.name=a.name||p.id,o.streams[p.name]=p;var f=n.ownerDocument,l={close:f.close,open:f.open,write:f.write,writeln:f.writeln};i(f,{close:t,open:t,write:function(){return c(s(arguments).join(""))},writeln:function(){return c(s(arguments).join("")+"\n")}});var d=p.win.onerror||t;return p.win.onerror=function(t,e,n){a.error({msg:t+" - "+e+":"+n}),d.apply(p.win,arguments)},p.write(r,function(){i(f,l),p.win.onerror=d,a.done(),p=null,e()}),p}function o(r,o,i){n(i)&&(i={done:i}),i=a(i,f),r=/^#/.test(r)?l.document.getElementById(r.substr(1)):r.jquery?r[0]:r;var s=[r,o,i];return r.postscribe={cancel:function(){s.stream?s.stream.abort():s[1]=t}},i.beforeEnqueue(s),c.push(s),p||e(),r.postscribe}var u=0,c=[],p=null;return i(o,{streams:{},queue:c,WriteStream:g})}()}}(),o("undefined"!=typeof postscribe?postscribe:window.postscribe)}).call(n,void 0,void 0,void 0,void 0,function(t){e.exports=t})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/home/jacques/Workspace/publicite/node_modules/postscribe/htmlParser/htmlParser.js":3}],5:[function(t,e,n){(function(e){"use strict";function n(){!d&&e.OAS_listpos&&e.OAS_sitepage&&(d=!0,r(e.OAS_listpos,e.OAS_sitepage))}function r(t,n){e.OAS_url="http://pub.ftv-publicite.fr/4/"+n+"/1"+(Math.random()+"").substring(2,11)+"@"+t;var r=i().concat(a());r.length&&(e.OAS_url+="?"+r.join("&")),f(e.OAS_url,function(e,n){e||o(t)})}function o(t){function n(t){return function(){e.jQuery&&e.jQuery(t).trigger("onAdLoaded")}}for(var r=t.split(","),o=0;o<r.length;o++){var i=r[o];if(!(i in p))break;for(var a=document.querySelector("#eShowPub"+i+" .adCtnt"),s=p[i].length;!a&&s--;)a=document.querySelector(p[i][s]);a||(a=document.createElement("div"),a.setAttribute("id","invisibleAdBlock"+i),a.setAttribute("style","display:none"),document.body.appendChild(a)),"function"==typeof e.OAS_RICH&&(a.innerHTML="",c(a,'<script>OAS_RICH("'+i+'")</script>',{done:n(a)}))}}function i(){function t(t){var n,r="kx"+t;return e.localStorage?e.localStorage[r]||"":navigator.cookieEnabled?(n=document.cookie.match(r+"=([^;]*)"),n&&decodeURI(n[1])||""):""}e.Krux||((e.Krux=function(){e.Krux.q.push(arguments)}).q=[]);var n=e.Krux;n.user=t("user"),n.segments=t("segs");var r=[];return n.user&&r.push("kuid="+n.user),n.segments&&r.push("ksg="+n.segments),n.oasKeyValues=r.length?r.join(";")+";":"",r}function a(){var t=e.asiPlacements,n=[];for(var r in t)for(var o in t[r].data)n.push("_RM_HTML_PQ_"+r+"_="+o);return n}function s(t){if(e.asiPqTag)"function"==typeof t&&t();else{var n=new Image;n.src="http://pix04.revsci.net/F09828/b3/0/3/noscript.gif?D="+encodeURIComponent("DM_LOC="+encodeURIComponent(window.location.href+"&bpid=francetv")+"&DM_EOM=1")+"&C=F09828&L=0",f("http://pq-direct.revsci.net/pql?placementIdList=CGGoFv,fKXTTz,udrMUD,7KLJcc,1ykSjt,WUuEkF,uKgaD6&cb="+(new Date).getTime(),function(){"function"==typeof t&&t()})}}function u(){var t="https://lpm-francetv.nuggad.net/rc",n=["nuggn=1003426551","nuggrid="+encodeURIComponent(e.top.location.href)],r={france2:1520545807,"www.france3":1259673097,france4:815690618,france5:2039603482,pluzz:1807157810,la1ere:121201118,franceo:973798770,leclubfrancetelevisions:294570857,"emploi.francetv":1881534189,"france3-regions.francetvinfo":182958255,"www.francetvinfo":2095963359,francetvsport:1142146928,"mon-ludo":149893962,francetv:239418210};for(var o in r)if(~document.location.href.indexOf(o)){n.push("nuggsid="+r[o]);break}3===n.length&&f(t+"?"+n.join("&"))}var c=t("postscribe"),f=t("load-script"),l=t("domready"),p={Top:["#eAdBlkLargeBanner .adCtnt","#aTopPubBlk .adCtnt"],Middle:["#adVdoBlk .ctnt","#adVdoBlkMiddle .adCtnt","#pubMiddle","#adMiddle"],x01:["#adSkyscrapper01"],x02:["#adSkyscrapper02"]};if(e.OAS_AD)throw new Error("Erreur d'initialisation des publicités. Multi chargement");e.OAS_AD=function(){},l(function(){u(),e.AudienceScience?(s(n),setTimeout(n,300)):n()});var d=!1}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{domready:1,"load-script":2,postscribe:4}]},{},[5]);
//# sourceMappingURL=publicite.min.js.map