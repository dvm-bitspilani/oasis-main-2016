<!DOCTYPE html>
<html>

<head>
	<title>Canvas Follow Mouse</title>
	<style>
		#inkCanvas {
			width: 100vw;
			height: 100vh;
			position: fixed;
			top:0;
			left: 0;
		}

		body {
			padding: 0px;
			margin:0;
			overflow:hidden;
		}
	</style>
</head>

<body>
	<canvas id="inkCanvas" width="265" height="168"></canvas>

	<script>
		var canvas = document.querySelector("#inkCanvas");
		var context = canvas.getContext("2d");

		var bg = new Image();
		bg.src = "bg.jpg";
		var myImage = new Image();
		myImage.src = "mask.png";

		myImage.addEventListener("load", loadImage, false);

		function loadImage(e) {
			animate();
		}

		var shift = 0;
		var frameWidth = 298;
		var frameHeight = 168;
		var totalFrames = 40;
		var currentFrame = 0;
		var maxSpeed=3;
		var speedvar=0;

		function animate() {
			context.clearRect(0, 0, 298, 168);

  //draw each frame + place them in the middle
  context.drawImage(myImage, shift, 0, frameWidth, frameHeight, 0, 0, frameWidth, frameHeight);
  // context.globalCompositeOperation = "multiply";
  context.drawImage(bg, 0, 0, frameWidth,frameHeight,0,0,frameWidth,frameHeight);
  if (speedvar==maxSpeed){
  	shift += frameWidth + 1;
    speedvar=0;
  }
  /*
    Start at the beginning once you've reached the
    end of your sprite!
    */
    if (currentFrame != totalFrames*maxSpeed) {
    	// shift = 0;
    	// currentFrame = 0;
    	requestAnimationFrame(animate);
    	currentFrame++;
    }

    speedvar++;
}
context.globalCompositeOperation = "xor"

</script>

</body>

</html>