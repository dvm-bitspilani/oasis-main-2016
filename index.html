<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="css/style.css" media="screen" title="no title" charset="utf-8">
  </head>
  <body>
    <div  id="plainImg" class="content">
      <img src="img/moseshi.jpg">
    </div>
    <div id="blurImg">
      <img src="img/moseshi.jpg" alt="" />
    </div>
    <div class="transition-layer">
    <div class="paint"> </div>
  </div>
  <script src="js/jquery.min.js"></script>
 <script src="js/jquery.ba-throttle-debounce.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){
      $('.paint').addClass('startAnim');
    });

    var checkScrollSpeed = (function(settings){
    settings = settings || {};

    var lastPos, newPos, timer, delta,
        delay = settings.delay || 50; // in "ms" (higher means lower fidelity )

    function clear() {
      lastPos = null;
      delta = 0;
    }

    clear();

    return function(){
      newPos = window.scrollY;
      if ( lastPos != null ){ // && newPos < maxScroll
        delta = newPos -  lastPos;
      }
      lastPos = newPos;
      clearTimeout(timer);
      timer = setTimeout(clear, delay);
      return delta;
    };
})();

// // listen to "scroll" event
// window.onscroll = function(){
//    speed = checkScrollSpeed();
//    console.log(speed);
//  };
var time1,time2;
 $(window).scroll(function(){
   speed = checkScrollSpeed();
   console.log(speed);
   if(Math.abs(speed)>50){
     $('.paint').addClass('startAnim');
    time1 = new Date().getTime();
   }
   else {
    time2 = new Date().getTime();
    if(time2-time1>1500){
     $('.paint').removeClass('startAnim');
   }
   $('.paint').addClass('midAnim');
   }
 });
 $(window).scroll($.debounce( 250, true, function(){
   $('#blurImg').fadeIn();


} ) );
$(window).scroll($.debounce( 250, function(){
 $('#blurImg').fadeOut();

} ) );

  </script>
  </body>
</html>
